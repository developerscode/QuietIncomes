<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
</head>
<body onload="login();">
 <script type="text/javascript" charset="utf-8">

     // Wait for Cordova to load
     //
     document.addEventListener("deviceready", onDeviceReady, false);

     // Global InAppBrowser reference
     var iabRef = null;

     function iabLoadStart(event) {
         alert(event.type + ' - ' + event.url);
     }

     function iabLoadStop(event) {
         alert(event.type + ' - ' + event.url);
     }

     function iabClose(event) {
         alert(event.type);
         iabRef.removeEventListener('loadstart', iabLoadStart);
         iabRef.removeEventListener('loadstop', iabLoadStop);
         iabRef.removeEventListener('exit', iabClose);
     }

     // Cordova is ready
     //
     function onDeviceReady() {
         iabRef = window.open('http://apache.org', '_blank', 'location=yes');
         iabRef.addEventListener('loadstart', iabLoadStart);
         iabRef.addEventListener('loadstop', iabLoadStop);
         iabRef.addEventListener('exit', iabClose);
     }

    </script>
<div id="fb-root"></div>
<script type="text/javascript">
//<![CDATA[
    window.fbAsyncInit = function () {
        FB.init({
            appId: '480064372101222', // App ID
            channelURL: '', // Channel File, not required so leave empty
            status: true, // check login status
            cookie: true, // enable cookies to allow the server to access the session
            oauth: true, // enable OAuth 2.0
            xfbml: false  // parse XFBML
        });
    };
    // logs the user in the application and facebook
    function login() {
        FB.getLoginStatus(function (r) {
            if (r.status === 'connected') {
                window.location = 'inbox.html';
            } else {
                FB.login(function (response) {
                    if (response.authResponse) {
                        //if (response.perms)
                        window.open('inbox.html', '_blank', 'location=yes');
                    } else {
                        // user is not logged in
                    }
                }, { scope: 'email' }); // which data to access from user profile
            }
        });
    }
    // Load the SDK Asynchronously
    (function () {
        var e = document.createElement('script'); e.async = true;
        e.src = document.location.protocol + 'http://connect.facebook.net/en_US/all.js';
        document.getElementById('fb-root').appendChild(e);
    } ());
//]]>
</script>
</body>
</html>
